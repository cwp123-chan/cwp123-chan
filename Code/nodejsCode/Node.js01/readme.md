# Node.js

1. 关于 Node.js

    Node.js是一个让 JavaScript 运行在服务器端的开发平台.

1.1. 介绍

1). Node.js 不是一种独立的语言，与PHP、JSP、Python、Perl、Ruby的"既是语言，也是平台"不同，Node.js的使用JavaScript进行编程，运行在JavaScript引擎上（V8）。

2). 与PHP、JSP等相比，Node.js跳过了Apache、Naginx、IIS等HTTP服务器，它自己不用建设在任何服务器软件之上。Node.js的许多设计理念与经典架构（LAMP）有着很大的不同，可以提供强大的伸缩能力。

官网: https://nodejs.org/en/
中文网: http://nodejs.cn/


1.2. 特点

    单线程 | 非阻塞I/O | 事件驱动


1). 单线程

    所有客户端请求的连接 都使用一个线程来处理.

    Node.js 不是给每个连接去创建新的 线程,而是仅仅使用一个线程来处理.
    单线程带来的好处,减少内存的损耗,提高并发量. 操作系统完全不再有线程创建和销毁的开销.


2). 非阻塞I/O

    I/O操作不会阻塞程序的运行
    I: Input  输入
    O: Output 输出
    
    在阻塞模式下,一个线程只能处理一项任务,想要提高吞吐率,必须通过多线程
    而非阻塞模式下,一个线程 永远在执行某种运算操作.这个线程的CPU 核心利用率永远是满载的


3). 事件驱动

    客户端 请求建立连接，提交数据等行为，就会触发 相应的事件.
    在Node中，在一个时刻，只能执行 一个事件回调函数，但是在执行 一个事件回调函数的中途，（比如，又有新用户连接了）可以转而处理其他事件，然后返回继续执行原事件的回调函数，这种处理机制，称为“事件环”机制.


Node.js底层是C++(V8引擎也是C++写的).底层代码中，近半数都用于事件队列、回调函数队列的构建.用事件驱动 来完成服务器的 任务调度,是Node.js中 真正底层核心逻辑.


4). 三特点说明

单线程
    是为了减少内存的开销,操作系统的内存换页(创建/销毁)
    但是,如果某一个请求 有I/O操作,单线程就会被阻塞了!
非阻塞I/O
    程序不会傻等I/O语句的执行结束,才继续后续代码的运行,而会直接运行后续代码.
    但是,非阻塞就能完美的解决问题吗, 比如 小A的业务执行I/O过程中,有小C要新的请求,此时则么办?
事件驱动(事件环)
    不管是新用户的请求,还是老用户的I/O操作,都将以事件的方式加入到事件环之中,等待调度.

Node.js 中所有的I/O都是异步的.回调函数 套 回调函数
泡茶 : 洗茶壶 4 / 洗茶杯 3 / 用茶壶烧开水 8 / 准备茶叶 2 / 泡茶水 5 / 倒茶水 1
4 + 8 + 5 + 1 = 18
 3 + 2 


1.3 Node.js 的优缺点,适合开发什么?

1). 优点
    善于I/O,不善于 大量计算
    处理高并发
    服务器推送

2). 缺点
    单线程的缺点: 单一线程 一旦奔溃则整个服务全奔溃
    服务不是绝对可靠的.


3). 适用场景

    不能完全替代 传统的后端语言,但在某些方面优于传统.
    当应用程序需要处理大量并发的I/O操作，而在发出响应之前，应用程序内部 并不需要进行非常复杂的计算处理的时候，Node.js非常适合。
    Node.js也非常适合与web socket配合，开发长连接的实时交互应用程序。

    - 聊天室
    - 图文直播
    - 考试系统
    - 收集用户数据的表单
    - 提供JSON的API


2. 安装使用node

2.1 windows环境安装

node -v


2.2 搭建Node.js服务器 -- 首个nodejs页面页面

如果修改了程序代码,必须中断当前的node服务,重新在node一次

node.js是服务器的程序,写好的JS代码,都将运行在服务器上.返回给客户端的, 都是已经处理好的结果

node就是一个JS的运行环境

js文件是不能直接拖入浏览器取运行的,必须靠node去执行



2.3 根目录 与 web容器

    1). Node.js没有根目录的概念，因为它根本没有任何的web容器！
    
    
    2). 静态页面的呈现

    URL和真实的物理文件之间 是没有关系的。
    URL是通过 Node 的路由设计之后，才呈现出 某一个静态文件的
    

    3). HTTP运行原理


由此,我们可以看出,要是使用nodejs 搭建服务器,
是需要写 各种回调函数,定义 各种路由规则,来实现 页面的显示.
nodejs中就是 回调函数 套回调函数,每个回调函数 都是一个事件

由此就用到了 nodejs的三个特性:
    单线程 | 非阻塞I/O | 事件驱动(事件环)
    URL路由规则,与实际的物理文件,不一定有直接的联系. 

3. HTTP模块

    Node.js将各种功能，都划分为了一个个mudule(模块)
    需要用什么模块,就可以使用require('')来引入使用

4. URL模块


---------------------

PS.
V8引擎说明
    V8 JavaScript引擎是 Google用于其Chrome浏览器的底层JavaScript引擎。
    Google使用V8创建了一个用C++编写的超快解释器，该解释器拥有另一个独特特征：
    您可以下载该引擎并将其嵌入任何应用程序。
    V8 JavaScript引擎并不仅限于在一个浏览器中运行。
    因此，Node.js实际上会使用Google编写的V8 JavaScript引擎，并将其重建为可在服务器上使用。
